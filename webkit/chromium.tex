\input{setting.sty}
\begin{document}
\title{Chromium源码分析}
\author{荣怡}
\maketitle

\section{源码获取与编译}

\subsection{获取源码}

文献\cite{url:getcode}中列出了获取源码的地址\cite{url:downloadpage}步骤，具体做法可参照以下步骤：
\vspace{0.4cm}
\hrule
\begin{verbatim}
wget -c http://chromium-browser-source.commondatastorage.googleapis.com/chromium.r129764.tgz -O Chromiu.tgz
tar xvf Chromium.tgz
svn co http://src.chromium.org/svn/trunk/tools/depot_tools #下载更新工具
export PATH=$PATH:`pwd`/depot_tools
cd ./home/chrome-svn/tarball/chromium/src/ #这个目录是Chromium.tgz解压出来的层级目录
                                           #源码位于src目录下
gclient sync --force #更新chromium的代码，注意这个步骤中如果有提示某某文件夹已经不再被使用
                     #请删除，请删除对应的文件夹否则会造成编译错误。
#获取源码工作结束
\end{verbatim}
\hrule{}
\vspace{0.4cm}

\subsection{安装依赖}

源码获取后，需要安装依赖软件，可参考文献\cite{url:installdeps}。此外在link阶段会消耗大量内存，需要更换ld为ld.gold。在Ubuntu上的具体安装依赖及更换ld方法如下：
\vspace{0.4cm}
\hrule{}
\begin{verbatim}
sudo apt-get install bison fakeroot flex g++ g++-multilib gperf \
  libapache2-mod-php5 libasound2-dev libbz2-dev libcairo2-dev \
  libdbus-glib-1-dev libgconf2-dev libgl1-mesa-dev libglu1-mesa-dev \
  libglib2.0-dev libgtk2.0-dev libjpeg62-dev libnspr4-dev libnss3-dev \
  libpam0g-dev libsqlite3-dev libxslt1-dev libxss-dev \
  mesa-common-dev msttcorefonts patch perl pkg-config python \
  python2.5-dev rpm subversion libcupsys2-dev libgnome-keyring-dev \
  libcurl4-gnutls-dev libelf-dev libc6-i386 lib32stdc++6

sudo apt-get install apache2 wdiff lighttpd php5-cgi sun-java6-fonts \
   msttcorefonts ttf-dejavu-core ttf-kochi-gothic ttf-kochi-mincho

sudo apt-get install ttf-indic-fonts
sudo cp /usr/bin/ld{,_bk}
sudo cp /usr/bin/ld.gold /usr/bin/ld #you can also use ln
\end{verbatim}
\vspace{0.4cm}
\hrule{}


\subsection{编译}
编译步骤：先用google的gyp工具生成Makefile，然后make编译
\vspace{0.4cm}
\hrulefill{}
\begin{verbatim}
./build/gyp_chromium
make chrome #默认编译debug版本
make chrome BUILDTYPE=Release #如果想编译Release版本加此编译选项
make test_shell #编译webkit测试程序，与chrome的区别是render和broweser在同一个进程，方便
                #调试
\end{verbatim}
\hrulefill{}
\vspace{0.4cm}
\bibliographystyle{plainnat}
\bibliography{chromium}
\end{document}

